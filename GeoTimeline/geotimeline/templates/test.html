<!DOCTYPE html>
<html>
	<head>
		<title>Test Dragging</title>
		<meta charset="UTF-8" />
		<link href="styles/test.css" rel="stylesheet"/>
    	<script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=false"></script>
	    <script type="text/javascript">
	
	      function initialize() {
	        var mapDiv = document.getElementById('mapview');
	        var map = new google.maps.Map(mapDiv, {
	          center: new google.maps.LatLng(37.4419, -122.1419),
	          zoom: 13,
	          mapTypeId: google.maps.MapTypeId.ROADMAP
	        });
	      }
	      
	
	      google.maps.event.addDomListener(window, 'load', initialize);
	    </script>
	</head>
	<body background="">
		<div id="dragDivs">
			<div id="div_map" class="dragMe" draggable="true">
				<div class="dragBtn"><button id="btn_map">Minimize</button></div>
				<div id="mapview" class="dragCont">This is a map.</div>
			</div>
			<div id="div_time" class="dragMe" draggable="true">
				<div class="dragBtn"><button id="btn_time">Minimize</button></div>
				<div class="dragCont" id="timeline">This is a timeline.</div>
			</div>
			<div id="div_blog" class="dragMe" draggable="true">
				<div class="dragBtn"><button id="btn_blog">Minimize</button></div>
				<div class="dragCont" id="blogview">
					This is a blog post.<br />Look into making some timelines totally public like a wiki-timeline. These can be things like timelines for the Relief Society institution and everyone can add to it.
				</div>
			</div>
		</div>
		<!--<div id='map-canvas' style='width: 500px; height: 400px;'>
			
		</div>-->
	</body>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="js/testJS.js"></script>
	<script>
		
		//make everything draggable
		var dragSrcEl = null;
		function handleDragStart(e){
			//this.style.opacity = '0.4'; //this / e.target is the source node.
			dragSrcEl = this;
			e.dataTransfer.effectAllwoed = 'move';
			e.dataTransfer.setData('text/html', this.innerHTML);
		}
		
		function handleDragOver(e){
			if(e.preventDefault){
				e.preventDefault();//Necessary. Allows us to drop.
			}
			e.dataTransfer.dropEffect = 'move'; //See the section on the DataTransfer object.
			return false;
		}
		
		function handleDragEnter(e){
			//this / e.target is the current hover target.
			this.classList.add('over');
		}
		
		function handleDragLeave(e){
			this.classList.remove('over'); //this / e.target is previous target element.
		}
		
		function handleDrop(e){
			//this / e.target is current target element
			if(e.stopPropogation){
				e.stopPropogation(); //stops the browser from redirecting.
			}
			//Don't do anything if dropping the same spot we're dragging.
			if(dragSrcEl != this){
				//Set the source div's HTML to the HTML of the column we dropped on.
				dragSrcEl.innerHTML = this.innerHTML;
				this.innerHTML = e.dataTransfer.getData('text/html');
			}
			// See the section on the DataTransfer object.
			return false;
		}
		
		function handleDragEnd(e){
			//this / e.target is the source node.
			[].forEach.call(dragDivs, function(dragDiv){
				dragDiv.classList.remove('over');
			});
		}
		
		var dragDivs = document.querySelectorAll('#dragDivs .dragMe');
		[].forEach.call(dragDivs, function(dragDiv){
			dragDiv.addEventListener('dragstart',handleDragStart, false);
			dragDiv.addEventListener('dragenter', handleDragEnter, false);
			dragDiv.addEventListener('dragover', handleDragOver, false);
			dragDiv.addEventListener('dragleave', handleDragLeave, false);
			dragDiv.addEventListener('drop', handleDrop, false);
			dragDiv.addEventListener('dragend', handleDragEnd, false);
		});
	</script>
</html>